<html data-reactid=".1rghj7blam8" data-react-checksum="550885614"><head data-reactid=".1rghj7blam8.0"><meta charset="utf-8" data-reactid=".1rghj7blam8.0.0"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" data-reactid=".1rghj7blam8.0.1"><title data-reactid=".1rghj7blam8.0.2">Jest | A JavaScript Testing Library</title><meta name="viewport" content="width=device-width" data-reactid=".1rghj7blam8.0.3"><meta property="og:title" content="Jest | A JavaScript Testing Library" data-reactid=".1rghj7blam8.0.4"><meta property="og:type" content="website" data-reactid=".1rghj7blam8.0.5"><meta property="og:url" content="http:&#x2f;&#x2f;facebook.github.io&#x2f;jest&#x2f;index.html" data-reactid=".1rghj7blam8.0.6"><meta property="og:image" content="http:&#x2f;&#x2f;facebook.github.io&#x2f;react&#x2f;img&#x2f;logo_og.png" data-reactid=".1rghj7blam8.0.7"><meta property="og:description" content="A JavaScript Testing Library" data-reactid=".1rghj7blam8.0.8"><meta property="fb:app_id" content="623268441017527" data-reactid=".1rghj7blam8.0.9"><link rel="shortcut icon" href="http:&#x2f;&#x2f;facebook.github.io&#x2f;react&#x2f;favicon.ico" data-reactid=".1rghj7blam8.0.a"><link rel="stylesheet" href="&#x2f;jest&#x2f;css&#x2f;jest.css" data-reactid=".1rghj7blam8.0.b"><script type="text&#x2f;javascript" src="&#x2f;&#x2f;use.typekit.net&#x2f;vqa1hcx.js" data-reactid=".1rghj7blam8.0.c"></script><script type="text&#x2f;javascript" data-reactid=".1rghj7blam8.0.d">try{Typekit.load();}catch(e){}</script></head><body data-reactid=".1rghj7blam8.1"><div class="container" data-reactid=".1rghj7blam8.1.0"><div class="nav-main" data-reactid=".1rghj7blam8.1.0.0"><div class="wrap" data-reactid=".1rghj7blam8.1.0.0.0"><a class="nav-home" href="&#x2f;jest&#x2f;index.html" data-reactid=".1rghj7blam8.1.0.0.0.0">Jest</a><ul class="nav-site" data-reactid=".1rghj7blam8.1.0.0.0.1"><li data-reactid=".1rghj7blam8.1.0.0.0.1.$docs"><a href="&#x2f;jest&#x2f;docs&#x2f;tutorial.html" class="active" data-reactid=".1rghj7blam8.1.0.0.0.1.$docs.0">docs</a></li><li data-reactid=".1rghj7blam8.1.0.0.0.1.$support"><a href="&#x2f;jest&#x2f;support.html" class="" data-reactid=".1rghj7blam8.1.0.0.0.1.$support.0">support</a></li><li data-reactid=".1rghj7blam8.1.0.0.0.1.$github"><a href="http:&#x2f;&#x2f;github.com&#x2f;facebook&#x2f;jest" class="" data-reactid=".1rghj7blam8.1.0.0.0.1.$github.0">github</a></li></ul></div></div><section class="content wrap documentationContent" data-reactid=".1rghj7blam8.1.0.1"><div class="nav-docs" data-reactid=".1rghj7blam8.1.0.1.0"><div class="nav-docs-section" data-reactid=".1rghj7blam8.1.0.1.0.$Quick Start"><h3 data-reactid=".1rghj7blam8.1.0.1.0.$Quick Start.0">Quick Start</h3><ul data-reactid=".1rghj7blam8.1.0.1.0.$Quick Start.1"><li data-reactid=".1rghj7blam8.1.0.1.0.$Quick Start.1.$getting-started"><a style="margin-left:0;" class="" href="&#x2f;jest&#x2f;docs&#x2f;getting-started.html" data-reactid=".1rghj7blam8.1.0.1.0.$Quick Start.1.$getting-started.0">Getting Started</a></li><li data-reactid=".1rghj7blam8.1.0.1.0.$Quick Start.1.$tutorial"><a style="margin-left:0;" class="" href="&#x2f;jest&#x2f;docs&#x2f;tutorial.html" data-reactid=".1rghj7blam8.1.0.1.0.$Quick Start.1.$tutorial.0">Tutorial</a></li></ul></div><div class="nav-docs-section" data-reactid=".1rghj7blam8.1.0.1.0.$Deep Dive"><h3 data-reactid=".1rghj7blam8.1.0.1.0.$Deep Dive.0">Deep Dive</h3><ul data-reactid=".1rghj7blam8.1.0.1.0.$Deep Dive.1"><li data-reactid=".1rghj7blam8.1.0.1.0.$Deep Dive.1.$mock-functions"><a style="margin-left:0;" class="" href="&#x2f;jest&#x2f;docs&#x2f;mock-functions.html" data-reactid=".1rghj7blam8.1.0.1.0.$Deep Dive.1.$mock-functions.0">Mock functions</a></li><li data-reactid=".1rghj7blam8.1.0.1.0.$Deep Dive.1.$automatically-generated-mocks"><a style="margin-left:0;" class="" href="&#x2f;jest&#x2f;docs&#x2f;automatically-generated-mocks.html" data-reactid=".1rghj7blam8.1.0.1.0.$Deep Dive.1.$automatically-generated-mocks.0">Automatically generated mocks</a></li><li data-reactid=".1rghj7blam8.1.0.1.0.$Deep Dive.1.$manual-mocks"><a style="margin-left:0;" class="active" href="&#x2f;jest&#x2f;docs&#x2f;manual-mocks.html" data-reactid=".1rghj7blam8.1.0.1.0.$Deep Dive.1.$manual-mocks.0">Manual mocks</a></li><li data-reactid=".1rghj7blam8.1.0.1.0.$Deep Dive.1.$timer-mocks"><a style="margin-left:0;" class="" href="&#x2f;jest&#x2f;docs&#x2f;timer-mocks.html" data-reactid=".1rghj7blam8.1.0.1.0.$Deep Dive.1.$timer-mocks.0">Timer mocks</a></li><li data-reactid=".1rghj7blam8.1.0.1.0.$Deep Dive.1.$dependency-injection"><a style="margin-left:0;" class="" href="&#x2f;jest&#x2f;docs&#x2f;dependency-injection.html" data-reactid=".1rghj7blam8.1.0.1.0.$Deep Dive.1.$dependency-injection.0">Dependency Injection</a></li></ul></div><div class="nav-docs-section" data-reactid=".1rghj7blam8.1.0.1.0.$Reference"><h3 data-reactid=".1rghj7blam8.1.0.1.0.$Reference.0">Reference</h3><ul data-reactid=".1rghj7blam8.1.0.1.0.$Reference.1"><li data-reactid=".1rghj7blam8.1.0.1.0.$Reference.1.$api"><a style="margin-left:0;" class="" href="&#x2f;jest&#x2f;docs&#x2f;api.html" data-reactid=".1rghj7blam8.1.0.1.0.$Reference.1.$api.0">API</a></li></ul></div></div><div class="inner-content" data-reactid=".1rghj7blam8.1.0.1.1"><h1 data-reactid=".1rghj7blam8.1.0.1.1.0">Manual mocks</h1><div data-reactid=".1rghj7blam8.1.0.1.1.1"><hr data-reactid=".1rghj7blam8.1.0.1.1.1.0"><p data-reactid=".1rghj7blam8.1.0.1.1.1.1"><span data-reactid=".1rghj7blam8.1.0.1.1.1.1.0">Although autogeneration of mocks is convenient, there are behaviors it misses, such as fluent interfaces. Furthermore, providing useful helpers on mock versions of a module, especially a core module, promotes reuse and can help to hide implementation details.</span></p><p data-reactid=".1rghj7blam8.1.0.1.1.1.2"><span data-reactid=".1rghj7blam8.1.0.1.1.1.2.0">Mocks are defined by writing a module in a </span><code data-reactid=".1rghj7blam8.1.0.1.1.1.2.1">__mocks__&#x2f;</code><span data-reactid=".1rghj7blam8.1.0.1.1.1.2.2"> subdirectory. The file name will be interpreted as the mocked module name. Although it&#x27;s sometimes necessary to write a mock by hand to workaround missing DOM APIs, this should be avoided. If a module can&#x27;t be mocked, the best fix is to implement the missing functionality in the test framework&#x27;s DOM simulation.</span></p><p data-reactid=".1rghj7blam8.1.0.1.1.1.3"><span data-reactid=".1rghj7blam8.1.0.1.1.1.3.0">Assuming that the module can be loaded by the automocker, it&#x27;s best to build on the automocked API. This makes it harder for mock APIs to get out of sync with real ones. For instance, let&#x27;s say we&#x27;re working on an </span><code data-reactid=".1rghj7blam8.1.0.1.1.1.3.1">Indicator</code><span data-reactid=".1rghj7blam8.1.0.1.1.1.3.2"> that uses a </span><code data-reactid=".1rghj7blam8.1.0.1.1.1.3.3">Poller</code><span data-reactid=".1rghj7blam8.1.0.1.1.1.3.4">.</span></p><div class="prism language-javascript" data-reactid=".1rghj7blam8.1.0.1.1.1.4"><span class="token keyword" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$0">var</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.4.1"> Poller </span><span class="token operator" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$2">=</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.4.3"> </span><span class="token function" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$4"><span data-reactid=".1rghj7blam8.1.0.1.1.1.4.$4.0">require</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$4.$1">(</span></span><span class="token string" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$5">&#x27;Poller&#x27;</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$6">)</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$7">;</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.4.8">
</span><span class="token keyword" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$9">var</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.4.a"> Indicator </span><span class="token operator" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$11">=</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.4.c"> </span><span class="token keyword" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$13">function</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$14">(</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$15">)</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.4.g"> </span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$17">{</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.4.i">
  </span><span class="token keyword" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$19">this</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$20">.</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.4.l">poller </span><span class="token operator" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$22">=</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.4.n"> </span><span class="token keyword" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$24">new</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.4.p"> </span><span class="token class-name" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$26"><span data-reactid=".1rghj7blam8.1.0.1.1.1.4.$26.0">Poller</span></span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$27">(</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$28">)</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$29">.</span><span class="token function" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$30"><span data-reactid=".1rghj7blam8.1.0.1.1.1.4.$30.0">setInterval</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$30.$1">(</span></span><span class="token number" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$31">2000</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$32">)</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$33">;</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.4.y">
</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$35">}</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.4.$36">;</span></div><p data-reactid=".1rghj7blam8.1.0.1.1.1.5"><span data-reactid=".1rghj7blam8.1.0.1.1.1.5.0">In the test for </span><code data-reactid=".1rghj7blam8.1.0.1.1.1.5.1">Indicator</code><span data-reactid=".1rghj7blam8.1.0.1.1.1.5.2">, instances will have undefined values for their </span><code data-reactid=".1rghj7blam8.1.0.1.1.1.5.3">poller</code><span data-reactid=".1rghj7blam8.1.0.1.1.1.5.4"> member unless we carefully </span><code data-reactid=".1rghj7blam8.1.0.1.1.1.5.5">mockReturnThis</code><span data-reactid=".1rghj7blam8.1.0.1.1.1.5.6"> for </span><code data-reactid=".1rghj7blam8.1.0.1.1.1.5.7">Poller.prototype.setInterval</code><span data-reactid=".1rghj7blam8.1.0.1.1.1.5.8">. Let&#x27;s make it easier for people to use our module by enhancing the mock for </span><code data-reactid=".1rghj7blam8.1.0.1.1.1.5.9">Poller</code></p><div class="prism language-javascript" data-reactid=".1rghj7blam8.1.0.1.1.1.6"><span class="token keyword" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$0">var</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.6.1"> PollerMock </span><span class="token operator" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$2">=</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.6.3"> mockModules</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$4">.</span><span class="token function" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$5"><span data-reactid=".1rghj7blam8.1.0.1.1.1.6.$5.0">generateMock</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$5.$1">(</span></span><span class="token string" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$6">&#x27;Poller&#x27;</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$7">)</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$8">;</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.6.9">
PollerMock</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$10">.</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.6.b">prototype</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$12">.</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.6.d">setInterval</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$14">.</span><span class="token function" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$15"><span data-reactid=".1rghj7blam8.1.0.1.1.1.6.$15.0">mockReturnThis</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$15.$1">(</span></span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$16">)</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$17">;</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.6.i">
module</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$19">.</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.6.k">exports </span><span class="token operator" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$21">=</span><span data-reactid=".1rghj7blam8.1.0.1.1.1.6.m"> PollerMock</span><span class="token punctuation" data-reactid=".1rghj7blam8.1.0.1.1.1.6.$23">;</span></div><p data-reactid=".1rghj7blam8.1.0.1.1.1.7"><span data-reactid=".1rghj7blam8.1.0.1.1.1.7.0">Finally, it&#x27;s often helpful to include a method that&#x27;s intended to be called from a test that simulates behavior of mocked class, like </span><code data-reactid=".1rghj7blam8.1.0.1.1.1.7.1">mockInform</code><span data-reactid=".1rghj7blam8.1.0.1.1.1.7.2"> in an hypothetical </span><code data-reactid=".1rghj7blam8.1.0.1.1.1.7.3">EventBus</code><span data-reactid=".1rghj7blam8.1.0.1.1.1.7.4"> class. By convention, these helper methods should be prefixed with the word &quot;mock&quot; to make them clearly distinguishable from public APIs.</span></p><h2 data-reactid=".1rghj7blam8.1.0.1.1.1.8"><span data-reactid=".1rghj7blam8.1.0.1.1.1.8.0">Testing mocks</span></h2><p data-reactid=".1rghj7blam8.1.0.1.1.1.9"><span data-reactid=".1rghj7blam8.1.0.1.1.1.9.0">It&#x27;s generally an anti-pattern to implement an elaborate, stateful mock for a module. Before going down this route, consider covering the original module completely with tests and then whitelisting it, so that requiring it always provides the actual implementation, rather than the mock current list of whitelisted modules.</span></p><p data-reactid=".1rghj7blam8.1.0.1.1.1.a"><span data-reactid=".1rghj7blam8.1.0.1.1.1.a.0">In cases where this kind of mock is unavoidable, it&#x27;s best to write a test that
ensures that the mock and the actual implementation are in sync. Luckily, this
is relatively easy to do with the API provided by </span><code data-reactid=".1rghj7blam8.1.0.1.1.1.a.1">jest</code><span data-reactid=".1rghj7blam8.1.0.1.1.1.a.2">, which allows you to explicitly require both the actual and mock implementations of the same module in a single test.</span></p></div><div class="docs-prevnext" data-reactid=".1rghj7blam8.1.0.1.1.2"><a class="docs-prev" href="auto-mocks-and-manual-mocks.html" data-reactid=".1rghj7blam8.1.0.1.1.2.0">← Prev</a><a class="docs-next" href="timer-mocks.html" data-reactid=".1rghj7blam8.1.0.1.1.2.1">Next →</a></div></div></section><footer class="wrap" data-reactid=".1rghj7blam8.1.0.2"><div class="right" data-reactid=".1rghj7blam8.1.0.2.0">© 2014 Facebook Inc.</div></footer></div><div id="fb-root" data-reactid=".1rghj7blam8.1.1"></div><script data-reactid=".1rghj7blam8.1.2">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-41298772-1', 'facebook.github.io');
            ga('send', 'pageview');

            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)
            ){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
          </script><script type="text/javascript" src="/jest/docs/manual-mocks.includeRequire.bundle"> </script><packaged ></packaged><script type="text/javascript">require('es5-shim/es5-shim.js');require('es5-shim/es5-sham.js');var React = require('React');var ReactMount = require('ReactMount');var Component = require('website/src/jest/docs/manual-mocks.js');ReactMount.allowFullPageRender = true;React.renderComponent(Component({"requestParams":{}}),document);</script></body></html>